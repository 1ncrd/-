# Lattice

又看了会 huangx607087 的博客，现在终于对利用 Lattice 求解密码学问题有了一点点点点具体的理解。  

---
这里从一个较简单的背包问题入手，  
设有数集
$$M = a_1, a_2, a_3,…, a_n, \ a_i = O(2^n)$$  
$$X = x_1, x_2, x_3,…, x_n, \ x_i\in 0, 1$$  
$$C = \sum_{i=0}^n(a_ix_i)$$
在已知 $M$ 与 $C$ 的情况下，通常求 $X$ 是困难的，进行穷举有 $O(2^n)$ 的复杂度，那么如何使用 LLL 算法来解决背包问题呢，为了理解和表述方便，这里设  
$$\vec{M} = (200, 46, 165, 222, 24)$$  
$$\vec{X} = (1, 1, 0, 1, 0)$$  
则
$$\vec{C} = \vec{M}\cdot\vec{X}=468$$
构造矩阵
$$\begin{bmatrix}
E_{n\times n} & M_{n\times 1} \\
zero & -b
\end{bmatrix}$$  
带入数据  
$$\begin{bmatrix}
1 & 0 & 0 & 0 & 0 & 200 \\
0 & 1 & 0 & 0 & 0 & 46 \\
0 & 0 & 1 & 0 & 0 & 165 \\
0 & 0 & 0 & 1 & 0 & 222 \\
0 & 0 & 0 & 0 & 1 & 24 \\
0 & 0 & 0 & 0 & 0 & -468
\end{bmatrix}$$
把矩阵分离出行向量，那么就有  
$$\vec{v_1}=(1, 0, 0, 0, 0, 200)\\
\vec{v_2}=(0, 1, 0, 0, 0, 46)\\
\vec{v_3}=(0, 0, 1, 0, 0, 165)\\
\vec{v_4}=(0, 0, 0, 1, 0, 222)\\
\vec{v_5}=(0, 0, 0, 0, 1, 24)\\
\vec{v_6}=(0, 0, 0, 0, 0, -468)$$  
即可以 $v_1,v_2,v_3,v_4,v_5,v_6$ 构造一个格 $L$，那么有  
$$\vec{t}=\sum_{i=1}^6(x_iv_i)=(x_1,x_2,x_3,x_4,x_5, 0)$$  
其中 $x_i\in 0,1$ ，因此 $|\vec{t}|=O(\sqrt{n})$，而格中其他向量的数量级为 $O(2^5)$，因此 $\vec{t}$ 可以视作格 $L$ 中的最短向量，本问题便可以使用 LLL 算法求解。  
sage 代码

```py
from sage import *

m = [[1, 0, 0, 0, 0, 200],
[0, 1, 0, 0, 0, 46],
[0, 0, 1, 0, 0, 165],
[0, 0, 0, 1, 0, 222],
[0, 0, 0, 0, 1, 24],
[0, 0, 0, 0, 0, -468]]
M = Matrix(m)
print(M.LLL())
```

out

```txt
[ 1  1  0  1  0  0]
[-1 -1  0  1  1  0]
[-1  0  0  1 -1 -2]
[ 2 -1 -2  0 -1  0]
[ 1 -1  1  1 -3  1]
[-2  2 -2  1 -2  4]
```

可以看到第一行即为我们所求的向量 $\vec{t}$。

## 线性代数和数论知识

<https://huangx607087.online/2021/02/03/LatticeNotes2/>
